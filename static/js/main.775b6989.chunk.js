(this["webpackJsonpsea-battle"]=this["webpackJsonpsea-battle"]||[]).push([[0],[,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},,function(e,t,n){var a={"./en.json":17,"./ru.json":18};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=16},function(e){e.exports=JSON.parse('{"disabled":"Disabled","enabled":"Enabled","fix_ships":"Fix ships","fix_ships_explain":"You can fix ships if place them wrong","friend_id":"Friend ID","go_battle":"Go battle","good_game":"Good game!","one_minute_timeout":"We waited for your opponent for a minute...","player":"Player","please_wait":"Please wait","server_unavailable":"Server unavailable","your_id":"Your ID"}')},function(e){e.exports=JSON.parse('{"disabled":"\u0412\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e","enabled":"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e","fix_ships":"\u041f\u043e\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u0440\u0430\u0431\u043b\u0438","fix_ships_explain":"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u043a\u043e\u0440\u0430\u0431\u043b\u0435\u0439, \u0435\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043b\u0438\u0441\u044c","friend_id":"ID \u0434\u0440\u0443\u0433\u0430","go_battle":"\u0412 \u0431\u043e\u0439","good_game":"\u0423\u0434\u0430\u0447\u043d\u043e\u0439 \u0438\u0433\u0440\u044b!","one_minute_timeout":"\u0416\u0434\u0430\u043b\u0438 \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430 \u043c\u0438\u043d\u0443\u0442\u0443, \u043d\u0435 \u0434\u043e\u0436\u0434\u0430\u043b\u0438\u0441\u044c...","player":"\u0418\u0433\u0440\u043e\u043a","please_wait":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435","server_unavailable":"\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d","your_id":"\u0412\u0430\u0448 ID"}')},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n.n(r),i=n(8),o=n.n(i),c=(n(14),n(2)),l=n.n(c),u=n(3),p=n(1),m=(n(6),function(e){return a[e]}),f=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a,r,s){var i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/ships",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opponent:a,ships:t})});case 2:if(!(i=e.sent).ok){e.next=11;break}return e.next=6,i.json();case 6:o=e.sent,n(o.id),"0"!==o.opponentID?(v(!0,"success",m("good_game")),setTimeout((function(){g()}),30)):v(!0,"info",m("please_wait")),e.next=13;break;case 11:v(!0,"error",m("server_unavailable")),console.error("Failed, response status: ",i.status);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a,r){var s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="/shot?id="+t+"&x="+n+"&y="+a,e.next=3,fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if(202!==(i=e.sent).status){e.next=9;break}v(!0,"info",m("please_wait")),console.error("Failed, response status: ",i.status),e.next=20;break;case 9:if(!i.ok){e.next=18;break}return e.next=12,i.json();case 12:return o=e.sent,e.next=15,r(o);case 15:v(!1),e.next=20;break;case 18:v(!0,"error",m("server_unavailable")),console.error("Failed, response status: ",i.status);case 20:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=document.getElementById("popup");null!==a&&(a.classList.remove("success","error","info","warn"),!0===e?(a.classList.add("show"),a.classList.add(t)):a.classList.remove("show"),a.innerHTML=n+"<span>\xd7</span>")},h=function(){for(var e=[],t=0;t<10;t++){for(var n=[],a=0;a<10;a++)n.push(0);e.push(n)}return e},b=function(e){if(1===e)return{display:"none"}},E=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a,r){var s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return(o=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.type;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e){return o.apply(this,arguments)},s="none",e.next=5,d(t,n,a,i);case 5:"miss"===s?r(n,a,1):"hit"===s&&r(n,a,2);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),g=function(){var e=document.getElementById("yID");null!==e&&(e.style.display="none")},y=function(e){e.setMode;var t=e.gameMode,n=e.goBattle,a=e.setClear,i=e.isClear,o=e.setOpponentID,c=e.ID,l=e.copyOpID,u=Object(r.useState)(""),f=Object(p.a)(u,2),d=f[0],v=f[1];return s.a.createElement("div",{className:"Buttons"},s.a.createElement("form",{onSubmit:function(e){n(),e.preventDefault()},style:b(t)},s.a.createElement("label",null,m("friend_id"),": ",s.a.createElement("input",{type:"number",value:d,placeholder:"0",onChange:function(e){var t=e.target.value;t>0&&(v(t),o(t))}})),s.a.createElement("input",{type:"submit",value:m("go_battle")})),s.a.createElement("button",{onClick:function(){return a(!i)},style:b(t)},m("fix_ships")),s.a.createElement("i",{style:b(t)},m(!0===i?"enabled":"disabled")),s.a.createElement("p",{style:b(t)},m("fix_ships_explain")),s.a.createElement("span",{style:b((t+1)%2),id:"yID",onClick:function(){l()}},m("your_id"),": ",c))},O=(n(7),function(e){var t=e.count,n=e.name;return s.a.createElement("div",{className:"CounterTab"},s.a.createElement("p",null,t),s.a.createElement("p",null,n))}),j=function(e){var t=e.player1,n=e.player2;return s.a.createElement("div",{className:"Scoreboard"},s.a.createElement(O,{count:t,name:m("player")+" 1"}),s.a.createElement(O,{count:n,name:m("player")+" 2"}))},x=(n(4),function(e){var t;return t="assets/"+(t=!0===e.isKill?"Hit":"Miss")+"Small.png",s.a.createElement("div",{className:"Indicator"},s.a.createElement("img",{src:t,alt:""}))}),w=function(e){var t=e.i,n=e.name,a=e.count,i=e.kill,o=e.changeKill,c="assets/"+n+"Shape.png",l=Object(r.useState)(d()),u=Object(p.a)(l,2),m=u[0],f=u[1];function d(){for(var e=[],t=0;t<i;t++)e.push(s.a.createElement(x,{isKill:!0}));for(var n=i;n<a;n++)e.push(s.a.createElement(x,{isKill:!1}));return e}return Object(r.useEffect)((function(){f(d())}),[i]),s.a.createElement("div",{className:"Ship"},s.a.createElement("img",{src:c,alt:n}),s.a.createElement("p",null,a),m,s.a.createElement("button",{onClick:function(){o(t,1)}},"+"),s.a.createElement("p",null,i))},k=["Aircraft","Battleship","Cruiser","Submarine","Carrier"],_=function(){var e=Object(r.useState)([0,0,0,0,0]),t=Object(p.a)(e,2),n=t[0],a=t[1];function i(e,t){var r=n;r[e]=(r[e]+1)%(e+2),a(r)}return s.a.createElement("div",{className:"Shipsboard"},function(){for(var e=[],t=0;t<5;t++)e.push(s.a.createElement(w,{key:[t,n[t]].toString(),i:t,name:k[t],count:t+1,kill:n[t],changeKill:i}));return e}())},S=function(e){if(1===e)return{cursor:"url('assets/aim50.png') 25 25, auto"}},C=s.a.memo((function(e){var t=e.i,n=e.isClear,a=e.element,i=e.gameMode,o=e.setCell,c=e.shot;function l(e){var r;return 0===i?!1===e?(r=function(e,t){return!1===e&&!1===t?"Ship":"Empty"}(e,n),o(t)):!0===n?(r="Empty",1===a&&(r="Ship")):r="Empty":1===i&&(!1===e?0===a?(c(t),r="Empty"):1===a?r="Miss":2===a&&(r="Hit"):r=0===a?"Empty":1===a?"Miss":"Hit"),r="assets/"+r+".png",s.a.createElement("img",{src:r,alt:"",width:"100%",height:"100%"})}Object(r.useEffect)((function(){d(l(!0))}),[a]);var u=Object(r.useState)(l(!0)),m=Object(p.a)(u,2),f=m[0],d=m[1];return s.a.createElement("div",{className:"Cell",onClick:function(){return d(l(!1))},style:S(i)},f)})),N=s.a.memo((function(e){var t=e.i,n=e.isClear,a=e.gameMode,i=e.row,o=e.shot,c=Object(r.useState)(i);function p(e){Object(u.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o(t,e);case 2:case"end":return n.stop()}}),n)})))()}function m(e){i[e]=!1===n?1:0}i=c[0];var f=function(){for(var e=[],t=0;t<10;t++)e.push(s.a.createElement(C,{i:t,isClear:n,gameMode:a,setCell:m,shot:p,element:i[t]}));return e}();return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"CellRow"},f))})),I=(n(19),function(e){var t=e.isClear,n=e.gameMode,a=e.field,r=e.shot;var i=function(){for(var e=[],i=0;i<10;i++)e.push(s.a.createElement(N,{i:i,isClear:t,gameMode:n,row:a[i],shot:r}));return e}();return s.a.createElement("div",{className:"Battlefield"},i)}),D=function(){!function(e){e=e||navigator.language||"en",a=n(16)("./"+e+".json");var t=document.getElementById("html");null!==t&&t.setAttribute("lang",e)}();var e=Object(r.useState)(0),t=Object(p.a)(e,2),i=t[0],o=(t[1],Object(r.useState)(0)),c=Object(p.a)(o,2),m=c[0],d=(c[1],Object(r.useState)(0)),b=Object(p.a)(d,2),g=b[0],O=b[1],x=Object(r.useState)(h()),w=Object(p.a)(x,2),k=w[0],S=w[1],C=Object(r.useState)(!1),N=Object(p.a)(C,2),D=N[0],M=N[1],B=Object(r.useState)("0"),T=Object(p.a)(B,2),L=T[0],F=T[1],J=Object(r.useState)("0"),K=Object(p.a)(J,2),H=K[0],A=K[1],G=Object(r.useState)("light"),P=Object(p.a)(G,2),W=P[0],U=P[1];function Y(e,t,n){var a=k;a[e][t]=n,S(a)}Object(r.useEffect)((function(){var e=document.getElementById("html");null!==e&&("light"===W?e.classList.remove("dark-mode"):"dark"===W&&e.classList.add("dark-mode"))}),[W]);var R=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(k,A,L,F,O);case 2:S(h()),O(1),M(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=Object(r.useState)(0),q=Object(p.a)($,2),z=q[0],Q=q[1],V=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(L,t,n,Y);case 2:Q(z+1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"theme-toggle",onClick:function(){"light"===W?U("dark"):"dark"===W&&U("light")}},"\ud83c\udf13"),s.a.createElement("div",{className:"inline-board"},s.a.createElement(j,{player1:i,player2:m}),s.a.createElement(_,null),s.a.createElement(y,{gameMode:g,setMode:O,goBattle:R,isClear:D,setClear:M,setOpponentID:F,ID:H,copyOpID:function(){navigator.clipboard.writeText(H)}})),s.a.createElement("div",{className:"inline-field"},s.a.createElement(I,{key:g.toString(),isClear:D,gameMode:g,field:k,shot:V})),s.a.createElement("div",{className:"popup"},s.a.createElement("div",{className:"popup-box",id:"popup",onClick:function(){return v(!1)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.775b6989.chunk.js.map