(this["webpackJsonpsea-battle"]=this["webpackJsonpsea-battle"]||[]).push([[0],[,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),s=n.n(c),i=(n(13),n(1)),o=n.n(i),u=n(3),l=n(2),m=(n(15),n(6),function(e){var t=e.count,n=e.name;return r.a.createElement("div",{className:"CounterTab"},r.a.createElement("p",null,t),r.a.createElement("p",null,n))}),f=function(e){var t=e.player1,n=e.player2;return r.a.createElement("div",{className:"Scoreboard"},r.a.createElement(m,{count:t,name:"Player 1"}),r.a.createElement(m,{count:n,name:"Player 2"}))},p=(n(4),function(e){var t;return t="assets/"+(t=!0===e.isKill?"Hit":"Miss")+"Small.png",r.a.createElement("div",{className:"Indicator"},r.a.createElement("img",{src:t,alt:""}))}),h=function(e){var t=e.i,n=e.name,c=e.count,s=e.kill,i=e.changeKill,o="assets/"+n+"Shape.png",u=Object(a.useState)(v()),m=Object(l.a)(u,2),f=m[0],h=m[1];function v(){for(var e=[],t=0;t<s;t++)e.push(r.a.createElement(p,{isKill:!0}));for(var n=s;n<c;n++)e.push(r.a.createElement(p,{isKill:!1}));return e}return Object(a.useEffect)((function(){h(v())}),[s]),r.a.createElement("div",{className:"Ship"},r.a.createElement("img",{src:o,alt:n}),r.a.createElement("p",null,c),f,r.a.createElement("button",{onClick:function(){i(t,1)}},"+"),r.a.createElement("p",null,s))},v=["Aircraft","Battleship","Cruiser","Submarine","Carrier"],d=function(){var e=Object(a.useState)([0,0,0,0,0]),t=Object(l.a)(e,2),n=t[0],c=t[1];function s(e,t){var a=n;a[e]=(a[e]+1)%(e+2),c(a)}return r.a.createElement("div",{className:"Shipsboard"},function(){for(var e=[],t=0;t<5;t++)e.push(r.a.createElement(h,{key:[t,n[t]].toString(),i:t,name:v[t],count:t+1,kill:n[t],changeKill:s}));return e}())},b=function(e){if(1===e)return{cursor:"url('assets/aim50.png') 25 25, auto"}},E=r.a.memo((function(e){var t=e.i,n=e.isClear,c=e.element,s=e.gameMode,i=e.setCell,o=e.shot;function u(e){var a;return 0===s?!1===e?(a=function(e,t){return!1===e&&!1===t?"Ship":"Empty"}(e,n),i(t)):!0===n?(a="Empty",1===c&&(a="Ship")):a="Empty":1===s&&(!1===e?0===c?(o(t),a="Empty"):1===c?a="Miss":2===c&&(a="Hit"):a=0===c?"Empty":1===c?"Miss":"Hit"),a="assets/"+a+".png",r.a.createElement("img",{src:a,alt:"",width:"100%",height:"100%"})}Object(a.useEffect)((function(){h(u(!0))}),[c]);var m=Object(a.useState)(u(!0)),f=Object(l.a)(m,2),p=f[0],h=f[1];return r.a.createElement("div",{className:"Cell",onClick:function(){return h(u(!1))},style:b(s)},p)})),y=r.a.memo((function(e){var t=e.i,n=e.isClear,c=e.gameMode,s=e.row,i=e.shot,l=Object(a.useState)(s);function m(e){Object(u.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i(t,e);case 2:case"end":return n.stop()}}),n)})))()}function f(e){s[e]=!1===n?1:0}s=l[0];var p=function(){for(var e=[],t=0;t<10;t++)e.push(r.a.createElement(E,{i:t,isClear:n,gameMode:c,setCell:f,shot:m,element:s[t]}));return e}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"CellRow"},p))})),j=(n(16),function(e){var t=e.isClear,n=e.gameMode,a=e.field,c=e.shot;var s=function(){for(var e=[],s=0;s<10;s++)e.push(r.a.createElement(y,{i:s,isClear:t,gameMode:n,row:a[s],shot:c}));return e}();return r.a.createElement("div",{className:"Battlefield"},s)}),O=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/ships",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ships:t})});case 2:if(!(a=e.sent).ok){e.next=10;break}return e.next=6,a.json();case 6:r=e.sent,n(r.id),e.next=11;break;case 10:g(!0);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(o.a.mark((function e(t,n,a,r){var c,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="/shot/?id="+t+"&x="+n+"&y="+a,e.next=3,fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if(!(s=e.sent).ok){e.next=12;break}return e.next=7,s.json();case 7:return i=e.sent,e.next=10,r(i);case 10:e.next=12;break;case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),g=function(e){var t=document.getElementById("serverOffPopup");!0===e?null!==t&&t.classList.add("show"):null!==t&&t.classList.remove("show")},k=function(){for(var e=[],t=0;t<10;t++){for(var n=[],a=0;a<10;a++)n.push(0);e.push(n)}return e},x=function(e){if(1===e)return{display:"none"}},S=function(){var e=Object(u.a)(o.a.mark((function e(t,n,a,r){var c,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.type;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(e){return i.apply(this,arguments)},c="none",e.next=5,w(t,n,a,s);case 5:"miss"===c?r(n,a,1):"hit"===c?r(n,a,2):g(!0);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),C=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],c=(t[1],Object(a.useState)(0)),s=Object(l.a)(c,2),i=s[0],m=(s[1],Object(a.useState)(0)),p=Object(l.a)(m,2),h=p[0],v=p[1],b=Object(a.useState)(k()),E=Object(l.a)(b,2),y=E[0],w=E[1],g=Object(a.useState)(!1),C=Object(l.a)(g,2),N=C[0],M=C[1],B=Object(a.useState)("0"),K=Object(l.a)(B,2),P=K[0],T=K[1];function G(e,t,n){var a=y;a[e][t]=n,w(a)}var H=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y,e.next=3,O(t,T);case 3:w(k()),v(1),M(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=Object(a.useState)(0),J=Object(l.a)(I,2),A=J[0],F=J[1],L=function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(P,t,n,G);case 2:F(A+1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"inline-board"},r.a.createElement(f,{player1:n,player2:i}),r.a.createElement(d,null),r.a.createElement("button",{onClick:H,style:x(h)},"Go battle"),r.a.createElement("button",{onClick:function(){return M(!N)},style:x(h)},"Fix ships"),r.a.createElement("i",{style:x(h)},!0===N?"Enabled":"Disabled"),r.a.createElement("p",{style:x(h)},"You can fix ships if place them wrong"),r.a.createElement("p",{style:x((h+1)%2),onClick:function(){return v(0)}},"Good game! id=",P)),r.a.createElement("div",{className:"inline-field"},r.a.createElement(j,{key:h.toString(),isClear:N,gameMode:h,field:y,shot:L})),r.a.createElement("div",{className:"popup"},r.a.createElement("span",{className:"popuptext",id:"serverOffPopup"},"Server unavailable")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.180dcd4d.chunk.js.map