(this["webpackJsonpsea-battle"]=this["webpackJsonpsea-battle"]||[]).push([[0],[,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),s=n.n(c),o=(n(14),n(1)),i=n.n(o),l=n(3),u=n(2),p=(n(6),function(){var e=Object(l.a)(i.a.mark((function e(t,n,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/ships",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opponent:a,ships:t})});case 2:if(!(r=e.sent).ok){e.next=11;break}return e.next=6,r.json();case 6:c=e.sent,n(c.id),d(!0,"success","Good game!"),e.next=13;break;case 11:d(!0,"error","Server unavailable"),console.error("Failed, response status: ",r.status);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),m=function(){var e=Object(l.a)(i.a.mark((function e(t,n,a,r){var c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="/shot?id="+t+"&x="+n+"&y="+a,e.next=3,fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if(!(s=e.sent).ok){e.next=13;break}return e.next=7,s.json();case 7:return o=e.sent,e.next=10,r(o);case 10:d(!1),e.next=15;break;case 13:d(!0,"error","Server unavailable"),console.error("Failed, response status: ",s.status);case 15:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/opponentID?id="+t,e.next=3,fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if(!(r=e.sent).ok){e.next=13;break}return e.next=7,r.json();case 7:c=e.sent,n(c.opponentID),E(c.opponentID),"0"!==c.opponentID&&d(!0,"success","Successfully get ID"),e.next=15;break;case 13:d(!0,"error","Server unavailable"),console.error("Failed, response status: ",r.status);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=document.getElementById("popup");null!==a&&(a.classList.remove("success","error"),!0===e?(a.classList.add("show"),a.classList.add(t)):a.classList.remove("show"),a.innerHTML=n)},v=function(){for(var e=[],t=0;t<10;t++){for(var n=[],a=0;a<10;a++)n.push(0);e.push(n)}return e},h=function(e){if(1===e)return{display:"none"}},b=function(){var e=Object(l.a)(i.a.mark((function e(t,n,a,r){var c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return(o=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.type;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(e){return o.apply(this,arguments)},c="none",e.next=5,m(t,n,a,s);case 5:"miss"===c?r(n,a,1):"hit"===c&&r(n,a,2);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),E=function(e){var t=document.getElementById("getID"),n=document.getElementById("yID");null!==t&&null!==n&&"0"!==e&&(t.style.display="none",n.style.display="none")},y=function(e){e.setMode;var t=e.gameMode,n=e.goBattle,c=e.setClear,s=e.isClear,o=e.setOpponentID,i=e.ID,l=e.copyOpID,p=Object(a.useState)(""),m=Object(u.a)(p,2),f=m[0],d=m[1];return r.a.createElement("div",{className:"Buttons"},r.a.createElement("span",{style:h(t)},"You can fix ships if place them wrong"),r.a.createElement("button",{onClick:function(){return c(!s)},style:h(t)},"Fix ships"),r.a.createElement("i",{style:h(t)},!0===s?"Enabled":"Disabled"),r.a.createElement("form",{onSubmit:function(e){n(),e.preventDefault()},style:h(t)},r.a.createElement("label",null,"Friend ID: ",r.a.createElement("input",{type:"number",value:f,placeholder:"0",onChange:function(e){var t=e.target.value;t>0&&(d(t),o(t))}})),r.a.createElement("input",{type:"submit",value:"Go battle"})),r.a.createElement("span",{style:h((t+1)%2),id:"yID",onClick:function(){l()}},"Your ID: ",i))},g=(n(7),function(e){var t=e.count,n=e.name;return r.a.createElement("div",{className:"CounterTab"},r.a.createElement("p",null,t),r.a.createElement("p",null,n))}),j=function(e){var t=e.player1,n=e.player2;return r.a.createElement("div",{className:"Scoreboard"},r.a.createElement(g,{count:t,name:"Player 1"}),r.a.createElement(g,{count:n,name:"Player 2"}))},O=(n(4),function(e){var t;return t="assets/"+(t=!0===e.isKill?"Hit":"Miss")+"Small.png",r.a.createElement("div",{className:"Indicator"},r.a.createElement("img",{src:t,alt:""}))}),k=function(e){var t=e.i,n=e.name,c=e.count,s=e.kill,o=e.changeKill,i="assets/"+n+"Shape.png",l=Object(a.useState)(d()),p=Object(u.a)(l,2),m=p[0],f=p[1];function d(){for(var e=[],t=0;t<s;t++)e.push(r.a.createElement(O,{isKill:!0}));for(var n=s;n<c;n++)e.push(r.a.createElement(O,{isKill:!1}));return e}return Object(a.useEffect)((function(){f(d())}),[s]),r.a.createElement("div",{className:"Ship"},r.a.createElement("img",{src:i,alt:n}),r.a.createElement("p",null,c),m,r.a.createElement("button",{onClick:function(){o(t,1)}},"+"),r.a.createElement("p",null,s))},w=["Aircraft","Battleship","Cruiser","Submarine","Carrier"],S=function(){var e=Object(a.useState)([0,0,0,0,0]),t=Object(u.a)(e,2),n=t[0],c=t[1];function s(e,t){var a=n;a[e]=(a[e]+1)%(e+2),c(a)}return r.a.createElement("div",{className:"Shipsboard"},function(){for(var e=[],t=0;t<5;t++)e.push(r.a.createElement(k,{key:[t,n[t]].toString(),i:t,name:w[t],count:t+1,kill:n[t],changeKill:s}));return e}())},x=function(e){if(1===e)return{cursor:"url('assets/aim50.png') 25 25, auto"}},C=r.a.memo((function(e){var t=e.i,n=e.isClear,c=e.element,s=e.gameMode,o=e.setCell,i=e.shot;function l(e){var a;return 0===s?!1===e?(a=function(e,t){return!1===e&&!1===t?"Ship":"Empty"}(e,n),o(t)):!0===n?(a="Empty",1===c&&(a="Ship")):a="Empty":1===s&&(!1===e?0===c?(i(t),a="Empty"):1===c?a="Miss":2===c&&(a="Hit"):a=0===c?"Empty":1===c?"Miss":"Hit"),a="assets/"+a+".png",r.a.createElement("img",{src:a,alt:"",width:"100%",height:"100%"})}Object(a.useEffect)((function(){d(l(!0))}),[c]);var p=Object(a.useState)(l(!0)),m=Object(u.a)(p,2),f=m[0],d=m[1];return r.a.createElement("div",{className:"Cell",onClick:function(){return d(l(!1))},style:x(s)},f)})),I=r.a.memo((function(e){var t=e.i,n=e.isClear,c=e.gameMode,s=e.row,o=e.shot,u=Object(a.useState)(s);function p(e){Object(l.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o(t,e);case 2:case"end":return n.stop()}}),n)})))()}function m(e){s[e]=!1===n?1:0}s=u[0];var f=function(){for(var e=[],t=0;t<10;t++)e.push(r.a.createElement(C,{i:t,isClear:n,gameMode:c,setCell:m,shot:p,element:s[t]}));return e}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"CellRow"},f))})),D=(n(16),function(e){var t=e.isClear,n=e.gameMode,a=e.field,c=e.shot;var s=function(){for(var e=[],s=0;s<10;s++)e.push(r.a.createElement(I,{i:s,isClear:t,gameMode:n,row:a[s],shot:c}));return e}();return r.a.createElement("div",{className:"Battlefield"},s)}),N=function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],c=(t[1],Object(a.useState)(0)),s=Object(u.a)(c,2),o=s[0],m=(s[1],Object(a.useState)(0)),d=Object(u.a)(m,2),E=d[0],g=d[1],O=Object(a.useState)(v()),k=Object(u.a)(O,2),w=k[0],x=k[1],C=Object(a.useState)(!1),I=Object(u.a)(C,2),N=I[0],M=I[1],B=Object(a.useState)("0"),T=Object(u.a)(B,2),L=T[0],F=T[1],G=Object(a.useState)("0"),K=Object(u.a)(G,2),H=K[0],J=K[1],P=Object(a.useState)("light"),A=Object(u.a)(P,2),W=A[0],Y=A[1];function R(e,t,n){var a=w;a[e][t]=n,x(a)}Object(a.useEffect)((function(){var e=document.getElementById("html");null!==e&&("light"===W?e.classList.remove("dark-mode"):"dark"===W&&e.classList.add("dark-mode"))}),[W]);var $=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(w,J,L);case 2:x(v()),g(1),M(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=Object(a.useState)(0),z=Object(u.a)(q,2),Q=z[0],U=z[1],V=function(){var e=Object(l.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(L,t,n,R);case 2:U(Q+1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"theme-toggle",onClick:function(){"light"===W?Y("dark"):"dark"===W&&Y("light")}},"\ud83c\udf13"),r.a.createElement("div",{className:"inline-board"},r.a.createElement(j,{player1:n,player2:o}),r.a.createElement(S,null),r.a.createElement(y,{gameMode:E,setMode:g,goBattle:$,isClear:N,setClear:M,setOpponentID:F,ID:H,copyOpID:function(){navigator.clipboard.writeText(H)}}),r.a.createElement("button",{onClick:function(){f(H,F)},style:h((E+1)%2),id:"getID"},"Get opponent ID")),r.a.createElement("div",{className:"inline-field"},r.a.createElement(D,{key:E.toString(),isClear:N,gameMode:E,field:w,shot:V})),r.a.createElement("div",{className:"popup"},r.a.createElement("span",{className:"popup-box",id:"popup"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.7884f384.chunk.js.map